<div class="h-screen flex flex-col">
  <!-- Header -->
  <div class="px-4 py-3 bg-white border-b border-gray-200">
    <h1 class="text-2xl font-bold">Speech Therapy Session</h1>
    <p class="text-xs text-gray-600 mt-1">
      ðŸ”— Share this URL: <code class="bg-gray-100 px-2 py-1 rounded font-mono"><%= request.original_url %></code>
    </p>
  </div>

  <!-- Split Screen: Game + Video -->
  <div class="flex-1 flex overflow-hidden">
    <!-- Left: Game Canvas (70%) -->
    <div class="w-[70%] bg-gray-50 p-4 overflow-auto">
      <div id="synced-app" data-room-id="<%= @room_id %>" data-colyseus-url="<%= ENV['COLYSEUS_URL'] || 'ws://localhost:2567' %>"></div>
    </div>

    <!-- Right: Video (30%) -->
    <div class="w-[30%] bg-gray-900 border-l border-gray-700">
      <div id="zoom-app" data-room-id="<%= @room_id %>"></div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const syncedAppEl = document.getElementById('synced-app')
    const roomId = syncedAppEl.dataset.roomId
    const colyseusUrl = syncedAppEl.dataset.colyseusUrl

    // Mount SyncedCanvas with roomId and colyseusUrl props
    const syncedApp = window.createVueApp(window.VueComponents.SyncedCanvas, {
      roomId: roomId,
      colyseusUrl: colyseusUrl
    })
    syncedApp.mount('#synced-app')

    // Mount ZoomVideo with sessionName prop
    const zoomApp = window.createVueApp(window.VueComponents.ZoomVideo, {
      sessionName: roomId
    })
    zoomApp.mount('#zoom-app')
  })
</script>
